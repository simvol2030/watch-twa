-- Migration: Welcome Messages Table
-- Description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ Telegram –±–æ—Ç–∞
-- Created: 2025-12-07

-- ===== CREATE TABLE: welcome_messages =====

CREATE TABLE IF NOT EXISTS welcome_messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,

    -- –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
    order_number INTEGER NOT NULL,

    -- –ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    message_text TEXT NOT NULL,
    message_image TEXT,                         -- URL –∏–ª–∏ –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

    -- –ö–Ω–æ–ø–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    button_text TEXT,                           -- –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ú—É—Ä–∑–∏-–∫–æ–∏–Ω—ã")
    button_url TEXT,                            -- URL –∫–Ω–æ–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: WEB_APP_URL)

    -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
    delay_seconds INTEGER NOT NULL DEFAULT 1,  -- –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
    is_active INTEGER NOT NULL DEFAULT 1,      -- –ê–∫—Ç–∏–≤–Ω–æ/–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ (boolean)

    -- –ê—É–¥–∏—Ç
    created_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TEXT NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- ===== CREATE INDEX =====

CREATE INDEX IF NOT EXISTS idx_welcome_messages_order
    ON welcome_messages(order_number);

CREATE INDEX IF NOT EXISTS idx_welcome_messages_active
    ON welcome_messages(is_active, order_number);

-- ===== INSERT DEFAULT DATA =====
-- –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –±–æ—Ç–∞

INSERT INTO welcome_messages (order_number, message_text, button_text, button_url, delay_seconds, is_active) VALUES
(1, 'üí≥ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤ "–ú—É—Ä–∑–∏–∫ & Co"!

üéâ –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—Å!

–ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏. –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥–∞—è –ø–æ–∫—É–ø–∫–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç –≤–∞–º –≤—ã–≥–æ–¥—É!', '–ú—É—Ä–∑–∏-–∫–æ–∏–Ω—ã', '{WEB_APP_URL}', 0, 1),

(2, 'üéÅ –°–¢–ê–†–¢–û–í–´–ô –ë–û–ù–£–°

–ú—ã –Ω–∞—á–∏—Å–ª–∏–ª–∏ –≤–∞–º 500 –º—É—Ä–∑–∏-–∫–æ–∏–Ω–æ–≤ –Ω–∞ —Å—á—ë—Ç!

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–∫–∏–¥–∫—É! üí∞', '–ú—É—Ä–∑–∏-–∫–æ–∏–Ω—ã', '{WEB_APP_URL}', 1, 1),

(3, 'üìã –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ü–†–û–ì–†–ê–ú–ú–ê

üíö –ù–ê–ß–ò–°–õ–ï–ù–ò–ï –ë–ê–õ–õ–û–í:
‚Ä¢ –ü–æ–∫—É–ø–∞–µ—Ç–µ –Ω–∞ 1000‚ÇΩ ‚Üí –ø–æ–ª—É—á–∞–µ—Ç–µ 40 –º—É—Ä–∑–∏-–∫–æ–∏–Ω–æ–≤ (4%)
‚Ä¢ –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏

üí≥ –°–ü–ò–°–ê–ù–ò–ï –ë–ê–õ–õ–û–í:
‚Ä¢ –ú–æ–∂–µ—Ç–µ —Å–ø–∏—Å–∞—Ç—å –¥–æ 20% –æ—Ç —Å—É–º–º—ã —á–µ–∫–∞
‚Ä¢ 1 –º—É—Ä–∑–∏-–∫–æ–∏–Ω = 1 —Ä—É–±–ª—å —Å–∫–∏–¥–∫–∏
‚Ä¢ –í—ã–±–∏—Ä–∞–µ—Ç–µ —Å–∞–º–∏: —Å–ø–∏—Å–∞—Ç—å –∏–ª–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å

‚è∞ –°–†–û–ö –î–ï–ô–°–¢–í–ò–Ø:
‚Ä¢ –ë–∞–ª–ª—ã –¥–µ–π—Å—Ç–≤—É—é—Ç 1.5 –º–µ—Å—è—Ü–∞ (45 –¥–Ω–µ–π)
‚Ä¢ –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –±–∞–ª–ª—ã —Å–≥–æ—Ä–∞—é—Ç
‚Ä¢ –£—Å–ø–µ–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤–æ–≤—Ä–µ–º—è!

üè™ –ì–î–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
‚Ä¢ –ü–æ–∫–∞–∂–∏—Ç–µ QR –∫–æ–¥ –∫–∞—Ä—Ç—ã –∫–∞—Å—Å–∏—Ä—É
‚Ä¢ –ö–∞—Å—Å–∏—Ä –ø—Ä–∏–º–µ–Ω–∏—Ç —Å–∫–∏–¥–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚Ä¢ –í—ã –≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É –≤ —á–µ–∫–µ!', '–ú—É—Ä–∑–∏-–∫–æ–∏–Ω—ã', '{WEB_APP_URL}', 1, 1);

-- ===== NOTES =====
-- {WEB_APP_URL} - –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
-- delay_seconds = 0 –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ä–∞–∑—É)
-- delay_seconds = 1 –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö (–∑–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫—É–Ω–¥–∞)
